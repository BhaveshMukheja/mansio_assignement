import React, { useState, useEffect } from "react";
import flatImage1 from "../../../Assets/flatImage.jpg"; // Replace with your images
import flatImage2 from "../../../Assets/flatImage.jpg";
import flatImage3 from "../../../Assets/flatImage.jpg";
import flatImage4 from "../../../Assets/flatImage.jpg";
import flatImage5 from "../../../Assets/flatImage.jpg";

const Carousel = () => {
  const images = [flatImage1, flatImage2, flatImage3, flatImage4, flatImage5];
  const [currentIndex, setCurrentIndex] = useState(0);
  const [isAutoPlaying, setIsAutoPlaying] = useState(true);

  // Auto-play functionality
  useEffect(() => {
    let interval;
    if (isAutoPlaying) {
      interval = setInterval(() => {
        goToNext();
      }, 3000);
    }
    return () => clearInterval(interval);
  }, [currentIndex, isAutoPlaying]);

  const goToPrevious = () => {
    setCurrentIndex((prevIndex) =>
      prevIndex === 0 ? images.length - 1 : prevIndex - 1
    );
  };

  const goToNext = () => {
    setCurrentIndex((prevIndex) =>
      prevIndex === images.length - 1 ? 0 : prevIndex + 1
    );
  };

  const goToSlide = (index) => {
    setCurrentIndex(index);
  };

  return (
    <div className="relative w-full max-w-4xl mx-auto overflow-hidden rounded-3xl shadow-xl ">
      {/* Carousel container */}
      <div className="relative h-56">
        {/* Slides */}
        {images.map((image, index) => (
          <div
            key={index}
            className={`absolute inset-0 transition-opacity duration-700 ease-in-out ${
              index === currentIndex ? "opacity-100" : "opacity-0"
            }`}
          >
            <img
              src={image}
              alt={`Slide ${index + 1}`}
              className="w-full h-full object-cover"
            />
          </div>
        ))}

        {/* "Maa ki chut" div at top right */}
        <div className="absolute top-4 right-4 z-10 px-3 py-1 bg-black/50 text-white rounded-md inline-flex items-center justify-center">
          <svg
            width="16"
            height="16"
            viewBox="0 0 16 16"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M8.39599 15.5051L8.38799 15.5065L8.34066 15.5298L8.32733 15.5325L8.31799 15.5298L8.27066 15.5058C8.26355 15.504 8.25821 15.5054 8.25466 15.5098L8.25199 15.5165L8.24066 15.8018L8.24399 15.8151L8.25066 15.8238L8.31999 15.8731L8.32999 15.8758L8.33799 15.8731L8.40733 15.8238L8.41533 15.8131L8.41799 15.8018L8.40666 15.5171C8.40488 15.51 8.40133 15.506 8.39599 15.5051ZM8.57199 15.4298L8.56266 15.4311L8.43999 15.4931L8.43333 15.4998L8.43133 15.5071L8.44333 15.7938L8.44666 15.8018L8.45199 15.8071L8.58599 15.8685C8.59444 15.8707 8.60088 15.8689 8.60533 15.8631L8.60799 15.8538L8.58533 15.4445C8.5831 15.436 8.57866 15.4311 8.57199 15.4298ZM8.09533 15.4311C8.09239 15.4293 8.08888 15.4288 8.08552 15.4295C8.08217 15.4303 8.07923 15.4323 8.07733 15.4351L8.07333 15.4445L8.05066 15.8538C8.0511 15.8618 8.05488 15.8671 8.06199 15.8698L8.07199 15.8685L8.20599 15.8065L8.21266 15.8011L8.21466 15.7938L8.22666 15.5071L8.22466 15.4991L8.21799 15.4925L8.09533 15.4311Z"
              fill="url(#paint0_linear_23_2105)"
            />
            <path
              d="M6.07128 3.63192C6.46995 2.46525 8.08195 2.42992 8.55461 3.52592L8.59461 3.63259L9.13262 5.20592C9.25591 5.56674 9.45515 5.89693 9.7169 6.1742C9.97865 6.45148 10.2968 6.66939 10.6499 6.81325L10.7946 6.86725L12.3679 7.40459C13.5346 7.80325 13.5699 9.41525 12.4746 9.88792L12.3679 9.92792L10.7946 10.4659C10.4337 10.5891 10.1034 10.7883 9.82596 11.0501C9.54856 11.3118 9.33055 11.6301 9.18661 11.9833L9.13262 12.1273L8.59528 13.7013C8.19661 14.8679 6.58461 14.9033 6.11261 13.8079L6.07128 13.7013L5.53395 12.1279C5.41073 11.767 5.21153 11.4367 4.94978 11.1593C4.68802 10.8819 4.36981 10.6638 4.01661 10.5199L3.87261 10.4659L2.29928 9.92859C1.13195 9.52992 1.09661 7.91792 2.19261 7.44592L2.29928 7.40459L3.87261 6.86725C4.23344 6.74396 4.56362 6.54471 4.8409 6.28297C5.11817 6.02122 5.33609 5.70305 5.47995 5.34992L5.53395 5.20592L6.07128 3.63192ZM12.6666 1.33325C12.7913 1.33325 12.9136 1.36824 13.0194 1.43423C13.1252 1.50023 13.2104 1.59459 13.2653 1.70659L13.2973 1.78459C13.4444 2.21595 13.7839 2.5549 14.2153 2.70192C14.3403 2.74438 14.4498 2.823 14.5301 2.9278C14.6104 3.0326 14.6577 3.15886 14.6661 3.2906C14.6746 3.42233 14.6437 3.55361 14.5774 3.66778C14.5112 3.78195 14.4125 3.87388 14.2939 3.93192L14.2153 3.96392C13.7839 4.11107 13.445 4.45052 13.2979 4.88192C13.2554 5.00687 13.1767 5.11638 13.0719 5.19658C12.9671 5.27678 12.8408 5.32405 12.709 5.3324C12.5773 5.34075 12.4461 5.30981 12.3319 5.2435C12.2178 5.17719 12.1259 5.0785 12.0679 4.95992L12.0359 4.88192C11.8888 4.45056 11.5494 4.11161 11.1179 3.96459C10.993 3.92212 10.8834 3.84351 10.8031 3.73871C10.7229 3.63391 10.6755 3.50764 10.6671 3.37591C10.6587 3.24417 10.6895 3.1129 10.7558 2.99873C10.8221 2.88456 10.9207 2.79263 11.0393 2.73459L11.1179 2.70259C11.5493 2.55544 11.8883 2.21599 12.0353 1.78459C12.0802 1.65287 12.1653 1.53852 12.2785 1.45758C12.3917 1.37664 12.5274 1.33317 12.6666 1.33325Z"
              fill="url(#paint1_linear_23_2105)"
            />
            <defs>
              <linearGradient
                id="paint0_linear_23_2105"
                x1="8.60799"
                y1="15.6525"
                x2="8.04473"
                y2="15.6525"
                gradientUnits="userSpaceOnUse"
              >
                <stop stop-color="#C752E1" />
                <stop offset="0.5" stop-color="#80DEEC" />
                <stop offset="1" stop-color="#FB96B1" />
              </linearGradient>
              <linearGradient
                id="paint1_linear_23_2105"
                x1="14.6675"
                y1="7.96846"
                x2="1.25518"
                y2="7.96846"
                gradientUnits="userSpaceOnUse"
              >
                <stop stop-color="#C752E1" />
                <stop offset="0.5" stop-color="#80DEEC" />
                <stop offset="1" stop-color="#FB96B1" />
              </linearGradient>
            </defs>
          </svg>

          <svg
            width="101"
            height="16"
            viewBox="0 0 101 16"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M2.508 13H0.972V4.228H4.32C6.312 4.228 7.476 5.236 7.476 6.964C7.476 8.14 6.924 8.98 5.892 9.4L7.56 13H5.88L4.392 9.724H2.508V13ZM2.508 5.596V8.368H4.32C5.292 8.368 5.868 7.852 5.868 6.964C5.868 6.088 5.292 5.596 4.32 5.596H2.508ZM11.0252 13.156C9.26119 13.156 8.02519 11.872 8.02519 10.036C8.02519 8.176 9.23719 6.892 10.9772 6.892C12.7532 6.892 13.8812 8.08 13.8812 9.928V10.372L9.41719 10.384C9.52519 11.428 10.0772 11.956 11.0492 11.956C11.8532 11.956 12.3812 11.644 12.5492 11.08H13.9052C13.6532 12.376 12.5732 13.156 11.0252 13.156ZM10.9892 8.092C10.1252 8.092 9.59719 8.56 9.45319 9.448H12.4292C12.4292 8.632 11.8652 8.092 10.9892 8.092ZM15.7849 5.884C15.2809 5.884 14.8849 5.488 14.8849 4.996C14.8849 4.504 15.2809 4.12 15.7849 4.12C16.2649 4.12 16.6609 4.504 16.6609 4.996C16.6609 5.488 16.2649 5.884 15.7849 5.884ZM15.0529 13V7.072H16.5169V13H15.0529ZM19.4934 13H18.0294V7.072H19.3734L19.4934 7.768C19.7934 7.276 20.3934 6.892 21.2454 6.892C22.1454 6.892 22.7694 7.336 23.0814 8.02C23.3814 7.336 24.0774 6.892 24.9774 6.892C26.4174 6.892 27.2094 7.756 27.2094 9.124V13H25.7574V9.508C25.7574 8.656 25.3014 8.212 24.6054 8.212C23.8974 8.212 23.3574 8.668 23.3574 9.64V13H21.8934V9.496C21.8934 8.668 21.4494 8.224 20.7534 8.224C20.0574 8.224 19.4934 8.68 19.4934 9.64V13ZM30.4106 13.156C29.1506 13.156 28.3826 12.424 28.3826 11.308C28.3826 10.216 29.1746 9.532 30.5786 9.424L32.3546 9.292V9.16C32.3546 8.356 31.8746 8.032 31.1306 8.032C30.2666 8.032 29.7866 8.392 29.7866 9.016H28.5386C28.5386 7.732 29.5946 6.892 31.2026 6.892C32.7986 6.892 33.7826 7.756 33.7826 9.4V13H32.4986L32.3906 12.124C32.1386 12.736 31.3346 13.156 30.4106 13.156ZM30.8906 12.052C31.7906 12.052 32.3666 11.512 32.3666 10.6V10.288L31.1306 10.384C30.2186 10.468 29.8706 10.768 29.8706 11.248C29.8706 11.788 30.2306 12.052 30.8906 12.052ZM34.8848 9.904C34.8848 8.176 36.0128 6.88 37.7048 6.88C38.5928 6.88 39.2888 7.252 39.6368 7.888L39.7208 7.072H41.0768V12.7C41.0768 14.68 39.8888 15.916 37.9688 15.916C36.2648 15.916 35.1008 14.944 34.9208 13.36H36.3848C36.4808 14.128 37.0688 14.584 37.9688 14.584C38.9768 14.584 39.6248 13.948 39.6248 12.964V11.98C39.2528 12.532 38.5208 12.88 37.6688 12.88C35.9888 12.88 34.8848 11.62 34.8848 9.904ZM36.3608 9.868C36.3608 10.864 36.9968 11.608 37.9568 11.608C38.9648 11.608 39.5888 10.9 39.5888 9.868C39.5888 8.86 38.9768 8.164 37.9568 8.164C36.9848 8.164 36.3608 8.896 36.3608 9.868ZM43.3239 5.884C42.8199 5.884 42.4239 5.488 42.4239 4.996C42.4239 4.504 42.8199 4.12 43.3239 4.12C43.8039 4.12 44.1999 4.504 44.1999 4.996C44.1999 5.488 43.8039 5.884 43.3239 5.884ZM42.5919 13V7.072H44.0559V13H42.5919ZM47.0325 13H45.5685V7.072H46.9245L47.0445 7.84C47.4165 7.24 48.1365 6.892 48.9405 6.892C50.4285 6.892 51.1965 7.816 51.1965 9.352V13H49.7325V9.7C49.7325 8.704 49.2405 8.224 48.4845 8.224C47.5845 8.224 47.0325 8.848 47.0325 9.808V13ZM55.2869 13.156C53.5229 13.156 52.2869 11.872 52.2869 10.036C52.2869 8.176 53.4989 6.892 55.2389 6.892C57.0149 6.892 58.1429 8.08 58.1429 9.928V10.372L53.6789 10.384C53.7869 11.428 54.3389 11.956 55.3109 11.956C56.1149 11.956 56.6429 11.644 56.8109 11.08H58.1669C57.9149 12.376 56.8349 13.156 55.2869 13.156ZM55.2509 8.092C54.3869 8.092 53.8589 8.56 53.7149 9.448H56.6909C56.6909 8.632 56.1269 8.092 55.2509 8.092ZM63.857 13L61.937 7.072H63.461L64.241 9.616C64.373 10.084 64.493 10.6 64.601 11.152C64.709 10.576 64.817 10.204 65.009 9.616L65.825 7.072H67.313L68.105 9.616C68.177 9.856 68.417 10.744 68.489 11.14C68.585 10.696 68.777 9.988 68.885 9.616L69.677 7.072H71.225L69.173 13H67.805L66.989 10.432C66.749 9.652 66.617 9.088 66.569 8.788C66.509 9.064 66.401 9.484 66.101 10.456L65.285 13H63.857ZM72.8435 5.884C72.3395 5.884 71.9435 5.488 71.9435 4.996C71.9435 4.504 72.3395 4.12 72.8435 4.12C73.3235 4.12 73.7195 4.504 73.7195 4.996C73.7195 5.488 73.3235 5.884 72.8435 5.884ZM72.1115 13V7.072H73.5755V13H72.1115ZM77.104 13H75.64V8.296H74.5V7.072H75.64V5.224H77.104V7.072H78.256V8.296H77.104V13ZM80.6302 13H79.1662V4.072H80.6422V7.84C81.0142 7.264 81.7102 6.892 82.5622 6.892C84.0262 6.892 84.7942 7.816 84.7942 9.352V13H83.3302V9.7C83.3302 8.704 82.8382 8.224 82.0942 8.224C81.1702 8.224 80.6302 8.872 80.6302 9.76V13ZM90.4389 13H88.8429L92.0109 4.228H93.5829L96.7509 13H95.1309L94.4229 10.972H91.1469L90.4389 13ZM92.5989 6.844L91.6029 9.676H93.9789L92.9709 6.844C92.8989 6.616 92.8149 6.352 92.7909 6.172C92.7549 6.34 92.6829 6.604 92.5989 6.844ZM99.3869 4.228V13H97.8509V4.228H99.3869Z"
              fill="url(#paint0_linear_23_2111)"
            />
            <defs>
              <linearGradient
                id="paint0_linear_23_2111"
                x1="101"
                y1="8"
                x2="-1.07447"
                y2="8"
                gradientUnits="userSpaceOnUse"
              >
                <stop stop-color="#FB97B1" />
                <stop offset="0.5" stop-color="#80DEEC" />
                <stop offset="1" stop-color="#C752E1" />
              </linearGradient>
            </defs>
          </svg>
        </div>

        {/* Navigation arrows */}
        <button
          onClick={goToPrevious}
          className="absolute left-4 top-1/2 -translate-y-1/2 z-10 w-10 h-10 rounded-full bg-white/50 text-white flex items-center justify-center hover:bg-white/70 transition-colors"
          aria-label="Previous slide"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            className="h-6 w-6"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
          >
            <path
              strokeLinecap="round"
              strokeLinejoin="round"
              strokeWidth={2}
              d="M15 19l-7-7 7-7"
            />
          </svg>
        </button>
        <button
          onClick={goToNext}
          className="absolute right-4 top-1/2 -translate-y-1/2 z-10 w-10 h-10 rounded-full bg-white/50 text-white flex items-center justify-center hover:bg-white/70 transition-colors"
          aria-label="Next slide"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            className="h-6 w-6"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
          >
            <path
              strokeLinecap="round"
              strokeLinejoin="round"
              strokeWidth={2}
              d="M9 5l7 7-7 7"
            />
          </svg>
        </button>

        {/* Current index display (e.g., 2/15) at bottom right */}
        <div className="absolute bottom-4 right-4 z-10 px-3 py-1 bg-black/50 text-white rounded-2xl">
          {currentIndex + 1}/{images.length}
        </div>

        {/* Indicators */}
        <div className="absolute bottom-4 left-1/2 -translate-x-1/2 z-10 flex space-x-2">
          {images.map((_, index) => (
            <button
              key={index}
              onClick={() => goToSlide(index)}
              className={`w-3 h-3 rounded-full transition-colors ${
                index === currentIndex
                  ? "bg-brand-logo"
                  : "bg-white/50 hover:bg-brand-logo/75"
              }`}
              aria-label={`Go to slide ${index + 1}`}
            />
          ))}
        </div>
      </div>
    </div>
  );
};

export default Carousel;
